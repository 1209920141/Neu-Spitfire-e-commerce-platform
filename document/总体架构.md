# 一.综合

## 1.登录/注册

### 1.1 注册

##### 数据库

sys_user

##### 请求URL

http://xx.com/api/user/

##### 请求方式

POST 

##### 参数

| 参数名   | 必选 | 类型   | 说明                                 |
| -------- | ---- | ------ | ------------------------------------ |
| username | 是   | string | 用户名，唯一                         |
| password | 是   | string | 制造商中文名                         |
| name     | 是   | string | 昵称 可重复                          |
| role_id  | 是   | string | 角色ID，0-管理员；1-品牌商；2-借卖方 |
| email    | 是   | string | 邮箱                                 |
| phone    | 是   | string | 手机号                               |

##### 返回示例 

1.注册成功
```
 {
   "code": 200,
   "message": "success"
 }
```

2.注册失败
用户名已存在

``` 
 {
   "code": 504,
   "message": "Duplicate User name"
 }
```




##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 







### 1.2 登录

(1)说明

登陆时后端生成token，发给前端。

(2)api

##### 数据库

sys_user

##### 请求URL

http://xx.com/api/user/

##### 请求方式

POST 

##### 参数

| 参数名   | 必选 | 类型   | 说明         |
| -------- | ---- | ------ | ------------ |
| username | 是   | string | 用户名，唯一 |
| password | 是   | string | 制造商中文名 |
|          |      |        |              |
|          |      |        |              |
|          |      |        |              |
|          |      |        |              |

##### 返回示例 

1. 登录成功——userid，
```
 {
   "code": 200,
   "message": "success"
   "data":{
     "user_id": "userid",
     "jwt":"jwt"
   }
 }
```
2. 登录失败：
   1. 用户名不存在
```
 {
   "code": 504,
   "message": "User doesn't exist"
 }
```
   2. 用户名密码不匹配

``` 
  {
   "code": 504,
   "message": "Password is wrong"
 }
```


##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 



#### 1.3 初始化界面

post

判断是否是第一次进入

品牌商初始界面信息，和菜单栏权限





# 二.管理员

## 2.菜单/角色控制

### 2.1 菜单管理

#### 2.1.1菜单列表查询

#### （1）解释

通过user_id,查询用户权限，为管理员身份时，展示sys_menu表种全部的现有菜单信息.

#### （2）api

##### 数据库

| 数据库   | 字段    | 外键 | 备注             |
| -------- | ------- | ---- | ---------------- |
| sys_user | user_id |      | role_id=0 管理员 |

##### 请求URL

http://localhost:8088/menu/getAllMenuList

##### 请求方式

POST 

##### 参数

user_id 

##### 返回示例 

 1、查询失败

```
{
  "code": 504,
  "message": "This account don't have permission"
}
```

2、查询成功，菜单表种无信息

```
{
  "code": 200,
  "message": "no data",
  "data": null
}
```

3、查询成功，展示全部菜单信息

```
{
  "code": 200,
  "message": null,
  "data": [
    {
      "menu_id": 1,
      "menu_name": "a",
      "menu_url": "a",
      "parent_id": "a",
      "menu_order": "a",
      "menu_icon": "a",
      "menu_type": "a"
    },
    {
      "menu_id": 2,
      "menu_name": "b",
      "menu_url": "b",
      "parent_id": "b",
      "menu_order": "b",
      "menu_icon": "b",
      "menu_type": "b"
    }
  ]
}
```



##### 返回参数说明 

前端有效接收信息：

| 参数名     | 前端展示   | 类型         | 说明         |
| ---------- | ---------- | ------------ | ------------ |
| MENU_ID    | 否         | int(11)      | 主键         |
| MENU_NAME  | 是         | varchar(255) | 菜单名称     |
| MENU_URL   | 待定       | varchar(255) | 路径         |
| PARENT_ID  | 是         | varchar(100) | 父类ID       |
| MENU_ORDER | 是         | varchar(100) | 排序标识     |
| MENU_ICON  | 是（待定） | varchar(30)  | 菜单图标样式 |
| MENU_TYPE  | 否         | varchar(10)  | 菜单类型     |

##### 备注 



#### 2.1.2菜单列表修改

##### （1）解释

user_id,判断role_id=0,管理员身份。弹出菜单信息，仅可以修改菜单名称

##### （2）api

##### 数据库

| 数据库   | 字段    | 外键 | 备注             |
| -------- | ------- | ---- | ---------------- |
| sys_user | user_id |      | role_id=0 管理员 |
| sys_menu | menu_id |      |                  |

##### 请求URL

http://localhost:8088/menu/updateMenuInfo

##### 请求方式

POST 

##### 参数

| 参数名    | 必选 | 类型         | 说明     |
| --------- | ---- | ------------ | -------- |
| MENU_NAME | 是   | varchar(255) | 菜单名称 |
| menu_id   | 是   | int          | 菜单ID   |
| user_id   | 是   | int          | 用户ID   |
##### 返回示例 

1.修改成功

```
{
  "code": 200,
  "message": null
}
```



2.修改失败

``` 
 {
   "code": 504,
   "message": "This account don't have permission"
 }
```



##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 



### 2.2 角色管理

#### 2.2.1角色列表查询

#### （1）解释

通过user_id,查询用户权限，为管理员身份时，展示sys_user表中全部的现有角色信息.

#### （2）api
/rle/getUsers

##### 数据库

| 数据库   | 字段    | 外键 | 备注             |
| -------- | ------- | ---- | ---------------- |
| sys_user | user_id |      | role_id=0 管理员 |

##### 请求URL



##### 请求方式

POST 

##### 参数

user_id 

##### 返回示例 

 1、查询失败

```{
     "code": 504,
     "message": "Permission denied"
   }

​```{
     "code": 504,
     "message": "User doesn't exist"
   }
   

2、查询成功，展示全部角色信息（至少有一个管理员的角色）

​```{
     "code": 200,
     "message": null,
     "data": {
       "user1": {
         "user_id": 2,
         "username": "2",
         "password": "2",
         "name": "2",
         "rights": "2",
         "role_id": "1",
         "last_login": null,
         "ip": null,
         "status": null,
         "bz": null,
         "skin": null,
         "email": null,
         "number": null,
         "phone": null,
         "man_buyer_id": 2
       },
       "user0": {
         "user_id": 1,
         "username": "1",
         "password": "1",
         "name": "1",
         "rights": "1",
         "role_id": "0",
         "last_login": "1",
         "ip": "1",
         "status": "1",
         "bz": "1",
         "skin": "1",
         "email": "1",
         "number": "1",
         "phone": "1",
         "man_buyer_id": 1
       }
     }
   }

```



##### 返回参数说明 

前端有效接收信息：

| 参数名   | 前端展示 | 类型         | 说明           |
| -------- | -------- | ------------ | -------------- |
| USER_ID  | 否       | varchar(100) | 表中所用用户id |
| USERNAME | 是       | varchar(255) | 用户名，唯一   |
| NAME     | 是       | varchar(255) | 昵称（可重复） |
| ROLE_ID  | 是       | varchar(100) | 角色ID         |
| EMAIL    | 是       | varchar(32)  | 邮箱           |
| PHONE    | 是       | varchar(32)  | 手机           |

##### 备注 



#### 2.1.2角色列表新增（复用注册）



#### 2.1.3角色列表删除

##### （1）解释

返回两个user_id,一个是当前用户uid用于判断role_id=0,管理员身份；另一个是需要删除的user_id.，删除数据库里该条角色信息

##### （2）api

##### 数据库

| 数据库   | 字段    | 外键 | 备注             |
| -------- | ------- | ---- | ---------------- |
| sys_user | user_id |      | role_id=0 管理员 |
|          |         |      |                  |

##### 请求URL

/rle/deleteUser

##### 请求方式

POST 

##### 参数

| 参数名      | 必选 | 类型         | 说明             |
| ----------- | ---- | ------------ | ---------------- |
| tab_user_id | 是   | varchar(100) | 需要删除的用户id |
| user_id     | 是   | varchar(100) | 用户id           |
|             |      |              |                  |
|             |      |              |                  |
|             |      |              |                  |
|             |      |              |                  |

##### 返回示例 

1.删除成功
{
  "code": 200,
  "message": null
}
```

```



2.删除失败

``` 
 ``{
      "code": 504,
      "message": "Permission denied"
    }
 
 ```{
      "code": 504,
      "message": "User doesn't exist"
    }
```



##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 



#### 2.1.4角色列表修改

##### （1）解释

user_id,判断role_id=0,管理员身份。弹出角色信息，修改信息点击保存后，信息回传给后端保存在数据库

##### （2）api

##### 数据库

| 数据库   | 字段    | 外键 | 备注             |
| -------- | ------- | ---- | ---------------- |
| sys_user | user_id |      | role_id=0 管理员 |
|          |         |      |                  |

##### 请求URL

/rle/updateUser

##### 请求方式

POST 

##### 参数

| 参数名      | 必选 | 类型         | 说明             |
| ----------- | ---- | ------------ | ---------------- |
| tab_user_id | 是   | varchar(100) | 需要修改的用户id |
| USERNAME    | 是   | varchar(255) | 用户名，唯一     |
| NAME        | 是   | varchar(255) | 昵称（可重复）   |
| ROLE_ID     | 是   | varchar(100) | 角色ID           |
| EMAIL       | 是   | varchar(32)  | 邮箱             |
| PHONE       | 是   | varchar(32)  | 手机             |
| user_id     | 是   | varchar(100) | 当前登录的用户id |

##### 返回示例 

1.修改成功

```

​```{
     "code": 200,
     "message": null
   }



2.修改失败

​```  ``{
          "code": 504,
          "message": "Permission denied"
        }
     
     ```{
          "code": 504,
          "message": "Update operation failed"
        }
```

```



##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 



#### 2.1.4菜单权限修改

##### （1）解释

点击菜单权限，调用菜单展示接口，展示全部的菜单，用户通过勾选方式选择需要的菜单。

##### （2）api

##### 数据库

| 数据库   | 字段    | 外键 | 备注             |
| -------- | ------- | ---- | ---------------- |
| sys_user | user_id |      | role_id=0 管理员 |
|          |         |      |                  |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名      | 必选 | 类型         | 说明             |
| ----------- | ---- | ------------ | ---------------- |
| tab_user_id | 是   | varchar(100) | 需要修改的用户id |
| user_id     | 是   | varchar(100) | 当前登录的用户id |
|             |      |              |                  |
|             |      |              |                  |
|             |      |              |                  |
|             |      |              |                  |
|             |      |              |                  |

##### 返回示例 

1.修改成功

```

```



2.修改失败

```

```



##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 



## 9.电子钱包（账户管理）

### 9.1钱包审核



## 10.参数管理

## 11.数据字典

# 三.品牌商

## 3.品牌商信息维护

### 3.1 公司信息查询

#### （1）解释

前端返回user_id,在sys_user表中查询，如果man_buyer_id 为空，则目前无公司新增，进入新增页面。如有，则展示公司基本信息。

#### （2）api

##### 数据库

| 数据表           | 字段         | 外键         | 备注                     |
| ---------------- | ------------ | ------------ | ------------------------ |
| sys_user         | man_buyer_id |              | 通过前端返回的userid查询 |
| man_manufacturer | MAN_ID       | man_buyer_id | man_buyer_id存在         |

##### 请求URL

/mvo/getManufacturerByUserID/

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明   |
| ------- | ---- | ------ | ------ |
| user_id | 是   | string | 用户ID |
|         |      |        |        |
|         |      |        |        |
|         |      |        |        |
|         |      |        |        |

##### 返回示例 

 1、man_buyer_id不存在

```
{
  "code": 503,
  "message": "User doesn't exist"
}
```

2、man_buyer_id存在，返回对应公司信息

```
{
  "code": 200,
  "message": null,
  "data": {
    "man_id": 2,
    "name_en": "1",
    "name_cn": "1",
    "gmc_report_type": "1",
    "gmc_report_url": "1",
    "description": "1",
    "created_by": "abc",
    "creation_date": "2020-07-03",
    "last_update_by": "abc",
    "last_update_date": "2020-07-03",
    "call_cnt": 0,
    "remark": null,
    "sts_cd": null,
    "id": null
  }
}
```



##### 返回参数说明 

man_buyer_id存在时返回

前端有效接收信息：

| 参数名          | 展示 | 类型   | 说明                       |
| --------------- | ---- | ------ | -------------------------- |
| MAN_ID          | 否   | int    | 公司信息ID                 |
| NAME_EN         | 是   | string | 制造商英文名               |
| GMC_REPORT_TYPE | 是   | string | 品牌商认证类型  1-TÜV,2-UL |
| GMC_REPORT_URL  | 是   | string | 证书地址                   |
| DESCRIPTION     | 否   | string | 品牌商公司介绍             |

##### 备注 



### 3.2 公司信息新增——当前无公司信息

#### （1）解释

a. 查询接口返回为“无公司信息”时，跳转进入公司信息新增页面。公司信息记入man_manufacturer，自动生成man_id,man_id记入sys_user 的man_buyer_id。

#### （2）api

##### 数据库

| 数据表           | 字段         | 外键   | 备注           |
| ---------------- | ------------ | ------ | -------------- |
| man_manufacturer | MAN_ID       |        | 自动生成MAN_ID |
| sys_user         | man_buyer_id | MAN_ID |                |
|                  |              |        |                |

##### 请求URL

/mvo/addManufacturer/

##### 请求方式
POST 

##### 参数

| 参数名          | 必选 | 类型   | 说明                       |
| --------------- | ---- | ------ | -------------------------- |
| user_id         | 是   | string | 用户id                     |
| NAME_EN         | 是   | string | 制造商英文名               |
| NAME_CN         | 是   | string | 制造商中文名               |
| GMC_REPORT_TYPE | 是   | string | 品牌商认证类型  1-TÜV,2-UL |
| GMC_REPORT_URL  | 是   | string | 证书地址                   |
| DESCRIPTION     | 否   | string | 品牌商公司介绍             |

##### 返回示例 

 1、新增成功

​``` {
 {
   "code": 200,
   "message": null
 }
```

2、新增失败

```{
{
  "code": 504,
  "message": "Add operation failed"
}
```

##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 

确认按钮点击后，调用新增接口后，继续调用公司信息查询接口，展示公司基本信息

### 3.3 公司信息修改

#### （1）解释

点击修改按钮，弹出弹窗，返回公司id和基础信息。

#### （2）api

##### 数据库

| 数据表           | 字段   | 外键 | 备注 |
| ---------------- | ------ | ---- | ---- |
| man_manufacturer | MAN_ID |      |      |
|                  |        |      |      |

##### 请求URL

http://localhost:8088/mvo/updateManufacturer

##### 请求方式

POST 

{
  "description": "string",
  "gmc_report_type": "2",
  "gmc_report_url": "string",
  "man_id": 1,
  "name_en": "string"
}

##### 参数

| 参数名          | 必选 | 类型   | 说明                       |
| --------------- | ---- | ------ | -------------------------- |
| man_id          | 是   | string | 公司id                     |
| NAME_EN         | 是   | string | 制造商英文名               |
| GMC_REPORT_TYPE | 是   | string | 品牌商认证类型  1-TÜV,2-UL |
| GMC_REPORT_URL  | 是   | string | 证书地址                   |
| DESCRIPTION     | 否   | string | 品牌商公司介绍             |

##### 返回示例 

 1、修改成功

``` {
{
  "code": 200,
  "message": null
}
```

2、修改失败

```{
{
  "code": 504,
  "message": "Update operation failed"
}
```

##### 返回参数说明 

| 参数名 | 类型 | 说明 |
| :----- | :--- | ---- |
|        |      |      |

##### 备注 



### 3.3.2 公司信息删除

##### 请求URL

http://localhost:8088/mvo/deleteManufacturer

Post
{man_id}

##### 返回示例 

成功
{
  "code": 200,
  "message": null,
  "data": null
}

失败
{
  "code": 504,
  "message": "Delete operation failed"
}

### 3.4品牌信息查询

#### （1）解释

前端返回user_id,在sys_user表中查询，如果man_buyer_id 为空，则目前无公司信息。如有，则 查询品牌信息表

#### （2）api

##### 数据库

| 数据表    | 字段         | 外键         | 备注                     |
| --------- | ------------ | ------------ | ------------------------ |
| sys_user  | man_buyer_id |              | 通过前端返回的userid查询 |
| brd_brand | MAN_ID       | man_buyer_id | man_buyer_id存在         |
|           |              |              |                          |

##### 请求URL

http://localhost:8088/brd/getBrand

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明   |
| ------- | ---- | ------ | ------ |
| user_id | 是   | string | 用户ID |
|         |      |        |        |
|         |      |        |        |
|         |      |        |        |
|         |      |        |        |

##### 返回示例 

 1、man_buyer_id不存在

```

```

2、man_buyer_id存在，无品牌信息

```

```

3、man_buyer_id存在，有品牌信息

```
{
  "code": 200,
  "message": null,
  "data": {
    "brand1": {
      "brd_id": 3,
      "man_id": 1,
      "name_en": "4",
      "name_cn": null,
      "created_by": "1",
      "creation_date": "2020-07-07",
      "last_update_by": "1",
      "last_update_date": "2020-07-07",
      "call_cnt": 0,
      "remark": "4",
      "sts_cd": null
    },
    "brand0": {
      "brd_id": 1,
      "man_id": 1,
      "name_en": "2",
      "name_cn": null,
      "created_by": "1",
      "creation_date": "2020-07-07",
      "last_update_by": "1",
      "last_update_date": "2020-07-07",
      "call_cnt": 0,
      "remark": "2",
      "sts_cd": null
    }
  }
}
```



##### 返回参数说明 

brd_id存在时返回

前端有效接收信息：

| 参数名  | 展示 | 类型   | 说明        |
| ------- | ---- | ------ | ----------- |
| BRD_ID  | 否   | int    | 品牌ID      |
| NAME_EN | 是   | string | 品牌英文名  |
| remark  | 是   | string | 品牌图片url |
|         |      |        |             |
|         |      |        |             |

##### 备注 





### 3.5品牌信息新增

#### （1）解释

前端返回user_id,在sys_user表中查询man_buyer_id，新增信息记入brd_brand表中，自动生成brd_id

#### （2）api

##### 数据库

| 数据表    | 字段         | 外键         | 备注                     |
| --------- | ------------ | ------------ | ------------------------ |
| sys_user  | man_buyer_id |              | 通过前端返回的userid查询 |
| brd_brand | MAN_ID       | man_buyer_id | man_buyer_id存在         |
|           |              |              |                          |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明        |
| ------- | ---- | ------ | ----------- |
| user_id | 是   | string | 用户ID      |
| NAME_EN | 是   | string | 品牌英文名  |
| remark  | 是   | string | 品牌图片url |
|         |      |        |             |
|         |      |        |             |

##### 返回示例 

 1、新增成功

```

```

2、新增失败

```

```



##### 返回参数说明 

前端有效接收信息：

| 参数名 | 展示 | 类型 | 说明 |
| ------ | ---- | ---- | ---- |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |

##### 备注 





### 3.6 品牌信息修改

#### （1）解释

前端返回brd_id和品牌基础信息修改品牌表信息，信息记入brd_brand表中

#### （2）api

##### 数据库

| 数据表    | 字段 | 外键 | 备注 |
| --------- | ---- | ---- | ---- |
| brd_brand |      |      |      |
|           |      |      |      |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明        |
| ------- | ---- | ------ | ----------- |
| brd_id  | 是   | int    | 品牌ID      |
| NAME_EN | 是   | string | 品牌英文名  |
| remark  | 是   | string | 品牌图片url |
|         |      |        |             |
|         |      |        |             |

##### 返回示例 

 1、修改成功

```

```

2、修改失败

```

```



##### 返回参数说明 

前端有效接收信息：

| 参数名 | 展示 | 类型 | 说明 |
| ------ | ---- | ---- | ---- |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |

##### 备注 



### 3.7品牌信息删除

#### （1）解释

前端返回brd_id，删除表中的品牌信息记录

#### （2）api

##### 数据库

| 数据表    | 字段 | 外键 | 备注 |
| --------- | ---- | ---- | ---- |
| brd_brand |      |      |      |
|           |      |      |      |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名 | 必选 | 类型 | 说明   |
| ------ | ---- | ---- | ------ |
| brd_id | 是   | int  | 品牌ID |
|        |      |      |        |
|        |      |      |        |
|        |      |      |        |
|        |      |      |        |
|        |      |      |        |

##### 返回示例 

 1、删除成功

```

```

2、删除失败

```

```



##### 返回参数说明 

前端有效接收信息：

| 参数名 | 展示 | 类型 | 说明 |
| ------ | ---- | ---- | ---- |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |
|        |      |      |      |

##### 备注 



## 4.品牌商商品管理

### 4.1 商品信息查询

#### （1）解释

前端返回userid，根据userid，查询sys_user表中man_buyer_id 匹配 pro_product表中  man_id，查询所有的 pro_ID，返回值包含返回参数信息，返回参数由前端table承接

#### （2）api

##### 数据库

| 数据表           | 字段         | 外键           | 备注 |
| ---------------- | ------------ | -------------- | ---- |
| sys_user         | man_buyer_id |                |      |
| pro_product      | pro_ID       | man_id、brd_id |      |
| brd_brand        | brd_id       |                |      |
| pck_package_info | pro_id       | pro_id         |      |

##### 请求URL

/product/getProducts

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型 | 说明   |
| ------- | ---- | ---- | ------ |
| user_id | 是   | int  | 用户id |
|         |      |      |        |
|         |      |      |        |
|         |      |      |        |
|         |      |      |        |

##### 返回示例 

{
  "user_id":"1"
}


##### 返回参数说明 

| 参数名               | 必选 | 类型          | 说明                                    | 数据库字段       |
| -------------------- | ---- | ------------- | --------------------------------------- | ---------------- |
| user_id              | 是   | string        | 用户ID                                  | sys_user         |
| SKU_CD               | 是   | varchar(8)    | 商品sku编码                             | pro_product      |
| TITLE                | 是   | varchar(255)  | 标题                                    | pro_product      |
| UPC                  | 是   | varchar(15)   | upc编码                                 | pro_product      |
| EAN                  | 是   | varchar(13)   | ena编码                                 | pro_product      |
| MODEL                | 是   | varchar(45)   | 型号                                    | pro_product      |
| WARRANTY_DAY         | 是   | varchar(45)   | 保修期（单位有年、月、日）              | pro_product      |
| RETAIL_PRICE         | 是   | decimal(10,2) | 建议零售价                              | pro_product      |
| REMARK               | 是   | varchar(50)   | 图片url                                 | pro_product      |
| STS_CD               | 是   | char(1)       | 状态 0-待入仓     1-已入仓     2-在架中 | pro_product      |
| MININUM_RETAIL_PRICE | 是   | decimal(10,2) | 最低零售价                              | pro_product      |
| REPLENISHMENT_PERIOD | 是   | int(11)       | 库存                                    | pro_product      |
| KEY_WORDS            | 是   | varchar(255)  | 商品分类                                | pro_product      |
| WARRANTY             | 是   | text          | 保修政策说明                            | pro_product      |
| TIME_UNIT            | 是   | varchar(10)   | 保修期单位  1、年 2、月 3、日           | pro_product      |
| WIDTH                | 是   | decimal(7,2)  | 宽  - cm                                | pck_package_info |
| HEIGHT               | 是   | decimal(7,2)  | 高  - cm                                | pck_package_info |
| LENGTH               | 是   | decimal(7,2)  | 长  - cm                                | pck_package_info |
| WEIGHT               | 是   | decimal(5,2)  | 重  - kg                                | pck_package_info |
| brd_id               | 是   | int           | 品牌id                                  | pro_pro          |
| name_en              | 是   | string        | 品牌名                                  | brd_brand        |

##### 返回示例 
1、有商品时，返回商品详细信息
```
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "pro_id": 28,
      "sku_cd": "sku_cd",
      "brd_id": 1,
      "man_id": 1,
      "title": "title",
      "upc": "upc",
      "ean": "ean",
      "model": "model",
      "warranty_day": "warrantly_day",
      "retail_price": 23,
      "created_by": "string",
      "creation_date": "2020-07-07",
      "last_update_by": "string",
      "last_update_date": "2020-07-07",
      "remark": "E:/Develop/Files/Photos/f9af17fadcdc4389802d7e12fb1e2836.png",
      "sts_cd": "string",
      "mininum_retail_price": 1,
      "replenishment_period": 12,
      "key_words": "keywords",
      "warranty": "warranty",
      "time_unit": "timeunit",
      "stockseting": 12,
      "call_cnt": 0,
      "user_id": 0,
      "width": 10,
      "height": 10,
      "length": 10,
      "weight": 10,
      "description": null,
      "platform_type": null,
      "ebay_description": "This is a test. I justtttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt want to test how looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong it can beeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee.",
      "amazon_description": "amazon",
      "name_en": "string"
    },
    {
      "pro_id": 29,
      "sku_cd": "sku_cd",
      "brd_id": 1,
      "man_id": 1,
      "title": "title",
      "upc": "upc",
      "ean": "ean",
      "model": "model",
      "warranty_day": "warrantly_day",
      "retail_price": 23,
      "created_by": "string",
      "creation_date": "2020-07-07",
      "last_update_by": "string",
      "last_update_date": "2020-07-07",
      "remark": "E:/Develop/Files/Photos/b15f0c18284d4d8e93a74caa0ae10172.png",
      "sts_cd": "On shelf",
      "mininum_retail_price": 1,
      "replenishment_period": 12,
      "key_words": "keywords",
      "warranty": "warranty",
      "time_unit": "timeunit",
      "stockseting": 12,
      "call_cnt": 0,
      "user_id": 0,
      "width": 10,
      "height": 10,
      "length": 10,
      "weight": 10,
      "description": null,
      "platform_type": null,
      "ebay_description": "This is a test. I justtttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt want to test how looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong it can beeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee.",
      "amazon_description": "amazon",
      "name_en": "string"
    }
  ]
}
```

2、错误,无产品
```
 {
   "code": 504,
   "message": "No product available"
 }
```




##### 备注 

本部分仅为进入“商品管理信息”时table承接的信息，详细见报告说明15页，pdf第22页。

![image-20200703093245211](C:\Users\LXH\AppData\Roaming\Typora\typora-user-images\image-20200703093245211.png)

### 4.2商品详细信息新增

#### （1）解释

新增商品基础信息存在pro_product 体积信息存在pck_package_info

#### （2）api

##### 数据库

| 数据表           | 字段         | 外键   | 备注 |
| ---------------- | ------------ | ------ | ---- |
| sys_user         | man_buyer_id |        |      |
| pro_product      | pro_ID       | man_id |      |
| pck_package_info | pck_id       | pro_id |      |

##### 请求URL

/product/addProduct

##### 请求方式

POST 

##### 参数

| 参数名               | 必选 | 类型          | 说明                                    | 数据库字段       |
| -------------------- | ---- | ------------- | --------------------------------------- | ---------------- |
| user_id              | 是   | string        | 用户ID                                  | sys_user         |
| SKU_CD               | 是   | varchar(8)    | 商品sku编码                             | pro_product      |
| TITLE                | 是   | varchar(255)  | 标题                                    | pro_product      |
| UPC                  | 是   | varchar(15)   | upc编码                                 | pro_product      |
| EAN                  | 是   | varchar(13)   | ena编码                                 | pro_product      |
| MODEL                | 是   | varchar(45)   | 型号                                    | pro_product      |
| WARRANTY_DAY         | 是   | varchar(45)   | 保修期（单位有年、月、日）              | pro_product      |
| RETAIL_PRICE         | 是   | decimal(10,2) | 建议零售价                              | pro_product      |
| REMARK               | 是   | varchar(50)   | 图片url                                 | pro_product      |
| STS_CD               | 是   | char(1)       | 状态 0-待入仓     1-已入仓     2-在架中 | pro_product      |
| MININUM_RETAIL_PRICE | 是   | decimal(10,2) | 最低零售价                              | pro_product      |
| REPLENISHMENT_PERIOD | 是   | int(11)       | 库存                                    | pro_product      |
| KEY_WORDS            | 是   | varchar(255)  | 商品分类                                | pro_product      |
| WARRANTY             | 是   | text          | 保修政策说明                            | pro_product      |
| TIME_UNIT            | 是   | varchar(10)   | 保修期单位  1、年 2、月 3、日           | pro_product      |
| WIDTH                | 是   | decimal(7,2)  | 宽  - cm                                | pck_package_info |
| HEIGHT               | 是   | decimal(7,2)  | 高  - cm                                | pck_package_info |
| LENGTH               | 是   | decimal(7,2)  | 长  - cm                                | pck_package_info |
| WEIGHT               | 是   | decimal(5,2)  | 重  - kg                                | pck_package_info |
| brd_id               | 是   | string        | 品牌id                                  | brd_brand        |

##### 返回示例 

 1、新增成功
```
 {
   "code": 200,
   "message": "success"
 }
```

2、新增失败
```
 {
   "code": 500,
   "message": "Sorry!Exception occurs!Please try it later"
 }
```


##### 返回参数说明 

##### 备注 

### 4.3商品详细信息修改

#### （1）解释

修改时返回proid，商品基础信息存在pro_product 体积信息存在pck_package_info

#### （2）api

##### 数据库

| 数据表           | 字段         | 外键   | 备注 |
| ---------------- | ------------ | ------ | ---- |
| sys_user         | man_buyer_id |        |      |
| pro_product      | pro_ID       | man_id |      |
| pck_package_info | pck_id       | pro_id |      |

##### 请求URL

/product/updateProduct

##### 请求方式

POST 

##### 参数

| 参数名               | 必选 | 类型          | 说明                                    | 数据库字段       |
| -------------------- | ---- | ------------- | --------------------------------------- | ---------------- |
| user_id              | 是   | string        | 用户ID                                  | sys_user         |
| pro_id               | 是   | string        | 商品id                                  |                  |
| SKU_CD               | 是   | varchar(8)    | 商品sku编码                             | pro_product      |
| TITLE                | 是   | varchar(255)  | 标题                                    | pro_product      |
| UPC                  | 是   | varchar(15)   | upc编码                                 | pro_product      |
| EAN                  | 是   | varchar(13)   | ena编码                                 | pro_product      |
| MODEL                | 是   | varchar(45)   | 型号                                    | pro_product      |
| WARRANTY_DAY         | 是   | varchar(45)   | 保修期（单位有年、月、日）              | pro_product      |
| RETAIL_PRICE         | 是   | decimal(10,2) | 建议零售价                              | pro_product      |
| REMARK               | 是   | varchar(50)   | 图片url                                 | pro_product      |
| STS_CD               | 是   | char(1)       | 状态 0-待入仓     1-已入仓     2-在架中 | pro_product      |
| MININUM_RETAIL_PRICE | 是   | decimal(10,2) | 最低零售价                              | pro_product      |
| REPLENISHMENT_PERIOD | 是   | int(11)       | 库存                                    | pro_product      |
| KEY_WORDS            | 是   | varchar(255)  | 商品分类                                | pro_product      |
| WARRANTY             | 是   | text          | 保修政策说明                            | pro_product      |
| TIME_UNIT            | 是   | varchar(10)   | 保修期单位  1、年 2、月 3、日           | pro_product      |
| WIDTH                | 是   | decimal(7,2)  | 宽  - cm                                | pck_package_info |
| HEIGHT               | 是   | decimal(7,2)  | 高  - cm                                | pck_package_info |
| LENGTH               | 是   | decimal(7,2)  | 长  - cm                                | pck_package_info |
| WEIGHT               | 是   | decimal(5,2)  | 重  - kg                                | pck_package_info |
| brd_id               | 是   | string        | 品牌id                                  | brd_brand        |

##### 返回示例 

1、修改成功
```
{
  "code": 200,
  "message": "success"
}
```
2、修改失败
```
{
  "code": 500,
  "message": "Sorry!Exception occurs!Please try it later"
}
```

##### 返回参数说明 



##### 备注 



### 4.4商品删除

#### （1）解释

删除商品，基础信息存在pro_product 体积信息存在pck_package_info。两个表中对应pro_id的信息都要删除

#### （2）api

##### 数据库

| 数据表           | 字段         | 外键   | 备注 |
| ---------------- | ------------ | ------ | ---- |
| sys_user         | man_buyer_id |        |      |
| pro_product      | pro_ID       | man_id |      |
| pck_package_info | pck_id       | pro_id |      |

##### 请求URL

/product/deleteProduct

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明   |
| ------- | ---- | ------ | ------ |
| user_id | 是   | string | 用户ID |
| pro_id  | 是   | int    | 商品id |

##### 返回示例 

1、删除成功
```
{
  "code": 200,
  "message": "success"
}
```

2、删除失败
```
{
  "code": 500,
  "message": "Sorry!Exception occurs!Please try it later"
}
```




##### 返回参数说明 

##### 备注 



### 4.5商品状态改变（入仓[0-1]、下架[2-1]、上架[1-2]）

#### （1）解释

修改商品状态

#### （2）api

##### 数据库

| 数据表      | 字段         | 外键   | 备注 |
| ----------- | ------------ | ------ | ---- |
| sys_user    | man_buyer_id |        |      |
| pro_product | pro_ID       | man_id |      |
|             |              |        |      |

##### 请求URL

/product/UpdateSts

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型      | 说明                                         |
| ------- | ---- | --------- | -------------------------------------------- |
| user_id | 是   | string    | 用户ID                                       |
| pro_id  | 是   | int       | 商品id                                       |
| STS_CD  | 是   | char（1） | 商品状态：0-待入仓     1-已入仓     2-在架中 |

##### 返回示例 

1、修改成功
```
{
  "code": 200,
  "message": "success"
}
```

2、修改失败
```
{
  "code": 500,
  "message": "Sorry!Exception occurs!Please try it later"
}
```


##### 返回参数说明 

##### 备注 



### 4.6 有效在架商品信息查询（商品浏览）

#### （1）解释

前端无返回，查询商品表中全部的在架商品（sts=2）

#### （2）api

##### 数据库

| 数据表           | 字段   | 外键   | 备注 |
| ---------------- | ------ | ------ | ---- |
| pro_product      | pro_ID | brd_id |      |
| brd_brand        | brd_id |        |      |
| pck_package_info | pro_id | pro_id |      |

##### 请求URL

/product/getProductOnshelf

##### 请求方式

POST 

##### 参数

| 参数名 | 必选 | 类型 | 说明   |
| ------ | ---- | ---- | ------ |
| pro_id | 是   | int  | 商品id |
|        |      |      |        |
|        |      |      |        |
|        |      |      |        |
|        |      |      |        |

##### 返回示例 

1、有商品时，返回商品详细信息
```
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "pro_id": 29,
      "sku_cd": "sku_cd",
      "brd_id": 1,
      "man_id": 1,
      "title": "title",
      "upc": "upc",
      "ean": "ean",
      "model": "model",
      "warranty_day": "warrantly_day",
      "retail_price": 23,
      "created_by": "string",
      "creation_date": "2020-07-07",
      "last_update_by": "string",
      "last_update_date": "2020-07-07",
      "remark": "E:/Develop/Files/Photos/b15f0c18284d4d8e93a74caa0ae10172.png",
      "sts_cd": "On shelf",
      "mininum_retail_price": 1,
      "replenishment_period": 12,
      "key_words": "keywords",
      "warranty": "warranty",
      "time_unit": "timeunit",
      "stockseting": 12,
      "call_cnt": 0,
      "user_id": 0,
      "width": 10,
      "height": 10,
      "length": 10,
      "weight": 10,
      "description": null,
      "platform_type": null,
      "ebay_description": "This is a test. I justtttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt want to test how looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong it can beeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee.",
      "amazon_description": "amazon",
      "name_en": "string"
    }
  ]
}
```

2、错误
```
 {
   "code": 504,
   "message": "No product available"
 }
```


##### 返回参数说明 

| 参数名               | 必选 | 类型          | 说明                                    | 数据库字段       |
| -------------------- | ---- | ------------- | --------------------------------------- | ---------------- |
| pro_id               | 是   | string        | 商品id                                  | pro_product      |
| SKU_CD               | 是   | varchar(8)    | 商品sku编码                             | pro_product      |
| TITLE                | 是   | varchar(255)  | 标题                                    | pro_product      |
| UPC                  | 是   | varchar(15)   | upc编码                                 | pro_product      |
| EAN                  | 是   | varchar(13)   | ena编码                                 | pro_product      |
| MODEL                | 是   | varchar(45)   | 型号                                    | pro_product      |
| WARRANTY_DAY         | 是   | varchar(45)   | 保修期（单位有年、月、日）              | pro_product      |
| RETAIL_PRICE         | 是   | decimal(10,2) | 建议零售价                              | pro_product      |
| REMARK               | 是   | varchar(50)   | 图片url                                 | pro_product      |
| STS_CD               | 是   | char(1)       | 状态 0-待入仓     1-已入仓     2-在架中 | pro_product      |
| MININUM_RETAIL_PRICE | 是   | decimal(10,2) | 最低零售价                              | pro_product      |
| REPLENISHMENT_PERIOD | 是   | int(11)       | 库存                                    | pro_product      |
| KEY_WORDS            | 是   | varchar(255)  | 商品分类                                | pro_product      |
| WARRANTY             | 是   | text          | 保修政策说明                            | pro_product      |
| TIME_UNIT            | 是   | varchar(10)   | 保修期单位  1、年 2、月 3、日           | pro_product      |
| WIDTH                | 是   | decimal(7,2)  | 宽  - cm                                | pck_package_info |
| HEIGHT               | 是   | decimal(7,2)  | 高  - cm                                | pck_package_info |
| LENGTH               | 是   | decimal(7,2)  | 长  - cm                                | pck_package_info |
| WEIGHT               | 是   | decimal(5,2)  | 重  - kg                                | pck_package_info |
| brd_id               | 是   | int           | 品牌id                                  | pro_pro          |
| name_en              | 是   | string        | 品牌名                                  | brd_brand        |

##### 返回示例 

##### 备注 

## 5.品牌商订单管理

### 5.1品牌商订单查询

#### （1）解释

前端返回userid和需要查询的订单状态sts_cd

他对应需要哪个状态的订单就返回哪个订单

#### （2）api

##### 数据库

| 数据表      | 字段         | 外键         | 备注 |
| ----------- | ------------ | ------------ | ---- |
| sys_user    | man_buyer_id |              |      |
| order       | man_id       | man_buyer_id |      |
| pro_product | pro_ID       | man_id       |      |
|             |              |              |      |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明     |
| ------- | ---- | ------ | -------- |
| user_id | 是   | string | 用户ID   |
| sts_cd  | 是   | string | 订单状态 |
|         |      |        |          |

##### 返回示例 

1、查询成功



2、查询失败



##### 返回参数说明 

| 参数名             | 类型         | 说明                                                         | 数据库      |
| ------------------ | ------------ | ------------------------------------------------------------ | ----------- |
| or_id              | int          | 主键                                                         | order       |
| DSR_ID             | int(11)      | 借卖ID                                                       | order       |
| STR_ID             | int(11)      | 网店ID，外键关联str表主键                                    | order       |
| man_id             | int          | 品牌商id                                                     | order       |
| pro_id             | int          | 商品ID                                                       | order       |
| ORDER_ID           | varchar(45)  | AMAZON  / EBAY 平台的订单 ID                                 | order       |
| SALES_PRICE        | decimal(8,2) | 商品单价                                                     | order       |
| QTY                | int(11)      | 商品数量                                                     | order       |
| SKU_NO             | varchar(45)  | 商品SKU编号                                                  | order       |
| receive_name       | varchar(46)  | 收件人姓名                                                   | order       |
| receive_address    | varchar(47)  | 收件人地址                                                   | order       |
| receive_phone      | varchar(48)  | 收件人电话号                                                 | order       |
| tracking_company   | varchar(48)  | 物流公司                                                     | order       |
| tracking_number    | varchar(49)  | 物流单号                                                     | order       |
| sts_cd             | char(1)      | 订单状态     0-已取消     1-待支付     2-待发货     3-已发货     4-已完成 | order       |
| ORDER_CREATED_TIME | varchar(45)  | 订单创建时间                                                 | order       |
| PAID_TIME          | varchar(45)  | 支付时间                                                     | order       |
| ship_time          | varchar(46)  | 发货时间                                                     | order       |
| completed_time     | varchar(47)  | 订单完成时间                                                 | order       |
| cancelled_time     | varchar(48)  | 取消订单时间                                                 | order       |
| title              | string       | 商品标题                                                     | pro_product |

##### 备注 





### 5.2品牌商订单发货

#### （1）解释

前端返回orid和物流公司、物流单号

将订单状态由待发货—已发货stscd=2-3

#### （2）api

##### 数据库

| 数据表   | 字段         | 外键         | 备注 |
| -------- | ------------ | ------------ | ---- |
| sys_user | man_buyer_id |              |      |
| order    | man_id       | man_buyer_id |      |
|          |              |              |      |
|          |              |              |      |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名           | 必选 | 类型        | 说明     |
| ---------------- | ---- | ----------- | -------- |
| or_id            | 是   | string      | 订单ID   |
| sts_cd           | 是   | string      | 状态     |
| tracking_company | 是   | varchar(48) | 物流公司 |
| tracking_number  | 是   | varchar(49) | 物流单号 |

##### 返回示例 

1、发货成功



2、发货失败



##### 返回参数说明 

##### 备注 



### 5.3品牌商订单取消

#### （1）解释

前端返回orid和需要改变的

将订单状态由待发货—已发货stscd=3-0

#### （2）api

##### 数据库

| 数据表   | 字段         | 外键         | 备注 |
| -------- | ------------ | ------------ | ---- |
| sys_user | man_buyer_id |              |      |
| order    | man_id       | man_buyer_id |      |
|          |              |              |      |
|          |              |              |      |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名 | 必选 | 类型   | 说明   |
| ------ | ---- | ------ | ------ |
| or_id  | 是   | string | 订单ID |
| sts_cd | 是   | string | 状态   |
|        |      |        |        |

##### 返回示例 

1、取消成功



2、取消失败



##### 返回参数说明 

##### 备注 



## 9.电子钱包（提现）

# 四、借卖方

## 6.借卖方店铺信息维护

### 6.1 店铺信息新增

#### （1）解释

前端返回user_id,在sys_user表中查询，通过man_buyer_id 关联到借卖方表格dsr_id

#### （2）api

##### 数据库

| 数据表          | 字段         | 外键         | 备注                     |
| --------------- | ------------ | ------------ | ------------------------ |
| sys_user        | man_buyer_id |              | 通过前端返回的userid查询 |
| dsr_dropshipper | DSR_ID       | man_buyer_id | man_buyer_id存在         |

##### 请求URL
http://localhost:8088/str/addStore


##### 请求方式

POST 
{
  "plataeform_type": "2",
  "store_name": "2",
  "store_sts_cd": "2",
  "user_id": 2
}
##### 参数

| 参数名          | 必选 | 类型        | 说明                                        |
| --------------- | ---- | ----------- | ------------------------------------------- |
| PLATAEFORM_TYPE | 是   | varchar(2)  | 平台类别,1:Amazon;2:ebay                    |
| STORE_NAME      | 是   | varchar(45) | 网店名  - 从api中取得                       |
| STORE_STS_CD    | 是   | varchar(45) | 店铺状态：     0-出错     1-正常     2-关闭 |
| user_id         | 是   | string      | 用户id                                      |

##### 返回示例 

 1、新增成功

```
{
  "code": 200,
  "message": null
}
```

2、新增失败

```
{
  "code": 504,
  "message": "User doesn't exist"
}

{
  "code": 504,
  "message": "Can't find corresponding dsr information"
}
```



##### 返回参数说明 

前端有效接收信息：

##### 备注 

### 6.2 店铺信息查询

#### （1）解释

前端返回user_id,在sys_user表中查询，通过man_buyer_id 关联到借卖方表格dsr_id

#### （2）api

##### 数据库

| 数据表          | 字段         | 外键         | 备注                     |
| --------------- | ------------ | ------------ | ------------------------ |
| sys_user        | man_buyer_id |              | 通过前端返回的userid查询 |
| dsr_dropshipper | DSR_ID       | man_buyer_id | man_buyer_id存在         |

##### 请求URL
http://localhost:8088/str/getStoreByUserID


##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   |
| ------- | ---- | ------ |
| user_id | 是   | string |

##### 返回示例 

 1、查询成功，有店铺信息

```
{
  "code": 200,
  "message": null,
  "data": [
    {
      "str_id": 1,
      "dsr_id": 1,
      "plataeform_type": "2",
      "store_name": "2",
      "store_sts_cd": "2",
      "created_by": "string",
      "creation_date": "2020-07-06T16:00:00.000+00:00",
      "last_update_by": "string",
      "last_update_date": "2020-07-06T16:00:00.000+00:00",
      "call_cnt": 0,
      "sts_cd": "1",
      "remark": "1"
    },
    {
      "str_id": 2,
      "dsr_id": 1,
      "plataeform_type": "2",
      "store_name": "a",
      "store_sts_cd": "1",
      "created_by": "w",
      "creation_date": "2020-07-06T16:00:00.000+00:00",
      "last_update_by": "b",
      "last_update_date": "2020-07-06T16:00:00.000+00:00",
      "call_cnt": 1,
      "sts_cd": "1",
      "remark": "1"
    }
  ]
}
```

2、查询成功，无店铺信息

```
{
  "code": 200,
  "message": "There's no store information",
  "data": null
}

```

3、查询失败
```
{
  "code": 504,
  "message": "User doesn't exist"
}
```


##### 返回参数说明 

前端有效接收信息：

| 参数名          | 必选 | 类型        | 说明                                        |
| --------------- | ---- | ----------- | ------------------------------------------- |
| STR_ID          | 是   | INT         | 店铺ID                                      |
| PLATAEFORM_TYPE | 是   | varchar(2)  | 平台类别,1:Amazon;2:ebay                    |
| STORE_NAME      | 是   | varchar(45) | 网店名  - 从api中取得                       |
| STORE_STS_CD    | 是   | varchar(45) | 店铺状态：     0-出错     1-正常     2-关闭 |

##### 备注 



### 6.2 店铺信息修改

#### （1）解释

前端返回user_id,在sys_user表中查询，通过man_buyer_id 关联到借卖方表格dsr_id

#### （2）api

##### 数据库

| 数据表          | 字段         | 外键         | 备注                     |
| --------------- | ------------ | ------------ | ------------------------ |
| sys_user        | man_buyer_id |              | 通过前端返回的userid查询 |
| dsr_dropshipper | DSR_ID       | man_buyer_id | man_buyer_id存在         |

##### 请求URL
http://localhost:8088/str/updateStore

##### 请求方式

POST 

##### 参数

| 参数名          | 必选 | 类型        | 说明                                        |
| --------------- | ---- | ----------- | ------------------------------------------- |
| PLATAEFORM_TYPE | 是   | varchar(2)  | 平台类别,1:Amazon;2:ebay                    |
| STORE_NAME      | 是   | varchar(45) | 网店名  - 从api中取得                       |
| STORE_STS_CD    | 是   | varchar(45) | 店铺状态：     0-出错     1-正常     2-关闭 |
| user_id         | 是   | string      | 用户id                                      |
| str_id         | 是   | int         | 网店ID                                      |

##### 返回示例 

 1、修改成功

```
{
  "code": 200,
  "message": null
}
```

2、修改失败

```
{
  "code": 504,
  "message": "This account don't have permission"
}

{
  "code": 504,
  "message": "Update operation failed"
}
```



##### 返回参数说明 

前端有效接收信息：

##### 备注 

### 6.4 店铺信息删除

#### （1）解释

前端返回user_id, str_id ,在sys_user表中查询，通过man_buyer_id 关联到借卖方表格dsr_id

#### （2）api

##### 数据库

| 数据表          | 字段         | 外键         | 备注                     |
| --------------- | ------------ | ------------ | ------------------------ |
| sys_user        | man_buyer_id |              | 通过前端返回的userid查询 |
| dsr_dropshipper | DSR_ID       | man_buyer_id | man_buyer_id存在         |

##### 请求URL

http://localhost:8088/str/deleteStore

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   |
| ------- | ---- | ------ |
| user_id | 是   | string |
| str_id  | 是   | int    |

##### 返回示例 

1、删除成功

```
{
  "code": 200,
  "message": null
}
```

2、删除失败

{
  "code": 504,
  "message": "Delete operation failed"
}

##### 返回参数说明 

前端有效接收信息：

|      |      |      |
| :--- | :--- | ---- |
|      |      |      |

##### 备注 



#####  

## 7.借卖方商品浏览——心愿单

### 7.1心愿单添加

#### （1）解释

前端返回userid和proid，将信息记在wit_wishlist表中

#### （2）api

##### 数据库

| 数据表       | 字段         | 外键   | 备注 |
| ------------ | ------------ | ------ | ---- |
| sys_user     | man_buyer_id |        |      |
| wit_wishlist | wit_id       | dsr_id |      |

##### 请求URL

http://localhost:8088/wit/addWishlist

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明   |
| ------- | ---- | ------ | ------ |
| user_id | 是   | string | 用户id |
| pro_id  | 是   | string | 商品id |
|         |      |        |        |
|         |      |        |        |
|         |      |        |        |

##### 返回示例 

1、新增成功

```{
     "code": 200,
     "message": null
   }

```



2、新增失败

```
{
  "code": 504,
  "message": "User doesn't exist"
}

```



##### 返回参数说明 

|
|

### 7.2 心愿单信息查询（返回数据=商品信息查询）

#### （1）解释

前端返回userid，根据userid，查询sys_user表中man_buyer_id 匹配 wit_wishlist表中 dsr_id，查询所有的 pro_ID，返回值包含返回参数信息

#### （2）api

##### 数据库

| 数据表           | 字段         | 外键           | 备注 |
| ---------------- | ------------ | -------------- | ---- |
| sys_user         | man_buyer_id |                |      |
| wit_wishlist     | wit_id       | dsr_id         |      |
| pro_product      | pro_ID       | man_id、brd_id |      |
| brd_brand        | brd_id       |                |      |
| pck_package_info | pro_id       |                |      |
|                  |              |                |      |
|                  |              |                |      |

##### 请求URL

http://localhost:8088/wit/getWishlist

##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型 | 说明   |
| ------- | ---- | ---- | ------ |
| user_id | 是   | int  | 用户id |
|         |      |      |        |
|         |      |      |        |
|         |      |      |        |
|         |      |      |        |

##### 返回示例 

 1、有商品时，返回商品详细信息
 ```
 {
   "code": 200,
   "message": null,
   "data": {
     "pro": {
       "pro_id": 1,
       "sku_cd": null,
       "brd_id": 1,
       "man_id": 1,
       "title": "1",
       "upc": null,
       "ean": null,
       "model": null,
       "warranty_day": null,
       "retail_price": null,
       "created_by": null,
       "creation_date": null,
       "last_update_by": null,
       "last_update_date": null,
       "remark": null,
       "sts_cd": null,
       "mininum_retail_price": null,
       "replenishment_period": 0,
       "key_words": null,
       "warranty": null,
       "time_unit": null,
       "stockseting": 0,
       "call_cnt": 0
     },
     "brand": {
       "brd_id": 1,
       "man_id": 1,
       "name_en": "2",
       "name_cn": null,
       "created_by": "1",
       "creation_date": "2020-07-07",
       "last_update_by": "1",
       "last_update_date": "2020-07-07",
       "call_cnt": 0,
       "remark": "2",
       "sts_cd": null
     },
     "info": {
       "pck_id": 1,
       "warId": null,
       "proId": null,
       "typeCd": null,
       "width": 1,
       "height": 1,
       "length": 1,
       "weight": 1,
       "createdBy": null,
       "creationDate": null,
       "lastUpdateBy": null,
       "lastUpdateDate": null,
       "callCnt": null,
       "remark": null,
       "stsCd": null,
       "ebay_description": null,
       "amazon_description": null
     }
   }
 }
 ```

2、错误
{
  "code": 504,
  "message": "User doesn't exist"
}


##### 返回参数说明 

| 参数名               | 必选 | 类型          | 说明                                    | 数据库字段       |
| -------------------- | ---- | ------------- | --------------------------------------- | ---------------- |
| user_id              | 是   | string        | 用户ID                                  | sys_user         |
| SKU_CD               | 是   | varchar(8)    | 商品sku编码                             | pro_product      |
| TITLE                | 是   | varchar(255)  | 标题                                    | pro_product      |
| UPC                  | 是   | varchar(15)   | upc编码                                 | pro_product      |
| EAN                  | 是   | varchar(13)   | ena编码                                 | pro_product      |
| MODEL                | 是   | varchar(45)   | 型号                                    | pro_product      |
| WARRANTY_DAY         | 是   | varchar(45)   | 保修期（单位有年、月、日）              | pro_product      |
| RETAIL_PRICE         | 是   | decimal(10,2) | 建议零售价                              | pro_product      |
| REMARK               | 是   | varchar(50)   | 图片url                                 | pro_product      |
| STS_CD               | 是   | char(1)       | 状态 0-待入仓     1-已入仓     2-在架中 | pro_product      |
| MININUM_RETAIL_PRICE | 是   | decimal(10,2) | 最低零售价                              | pro_product      |
| REPLENISHMENT_PERIOD | 是   | int(11)       | 库存                                    | pro_product      |
| KEY_WORDS            | 是   | varchar(255)  | 商品分类                                | pro_product      |
| WARRANTY             | 是   | text          | 保修政策说明                            | pro_product      |
| TIME_UNIT            | 是   | varchar(10)   | 保修期单位  1、年 2、月 3、日           | pro_product      |
| WIDTH                | 是   | decimal(7,2)  | 宽  - cm                                | pck_package_info |
| HEIGHT               | 是   | decimal(7,2)  | 高  - cm                                | pck_package_info |
| LENGTH               | 是   | decimal(7,2)  | 长  - cm                                | pck_package_info |
| WEIGHT               | 是   | decimal(5,2)  | 重  - kg                                | pck_package_info |
| brd_id               | 是   | int           | 品牌id                                  | pro_pro          |
| name_en              | 是   | string        | 品牌名                                  | brd_brand        |

##### 返回示例 



### 7.3 心愿单删除（批量）

#### （1）解释

前端返回userid和多个proid。删除心愿单中的proid

##### 数据库

| 数据表       | 字段         | 外键   | 备注 |
| ------------ | ------------ | ------ | ---- |
| sys_user     | man_buyer_id |        |      |
| wit_wishlist | wit_id       | dsr_id |      |
| pro_product  | pro_ID       | man_id |      |
|              |              |        |      |

##### 请求URL

http://localhost:8088/wit/deleteWishlist

##### 请求方式

POST 

##### 参数

| 参数名  | 必选           | 类型   | 说明   |
| ------- | -------------- | ------ | ------ |
| user_id | 是             | string | 用户ID |
| pro_id  | 是(可能有多个) | int    | 商品id |

##### 返回示例 

 1、删除成功
{
  "code": 200,
  "message": null
}
2、删除失败
{
  "code": 504,
  "message": "Delete operation failed"
}


##### 返回参数说明 

##### 备注 





## 8.借卖方订单管理

### 5.1借卖方订单查询

#### （1）解释

前端返回userid和需要查询的订单状态sts_cd

他对应需要哪个状态的订单就返回哪个订单

#### （2）api

##### 数据库

| 数据表      | 字段         | 外键         | 备注 |
| ----------- | ------------ | ------------ | ---- |
| sys_user    | man_buyer_id |              |      |
| order       | dsr_id       | man_buyer_id |      |
| pro_product | pro_ID       | man_id       |      |
|             |              |              |      |

##### 请求URL



##### 请求方式

POST 

##### 参数

| 参数名  | 必选 | 类型   | 说明     |
| ------- | ---- | ------ | -------- |
| user_id | 是   | string | 用户ID   |
| sts_cd  | 是   | string | 订单状态 |

##### 返回示例 

1、查询成功



2、查询失败



##### 返回参数说明 

| 参数名             | 类型         | 说明                                                         | 数据库      |
| ------------------ | ------------ | ------------------------------------------------------------ | ----------- |
| or_id              | int          | 主键                                                         | order       |
| DSR_ID             | int(11)      | 借卖ID                                                       | order       |
| STR_ID             | int(11)      | 网店ID，外键关联str表主键                                    | order       |
| man_id             | int          | 品牌商id                                                     | order       |
| pro_id             | int          | 商品ID                                                       | order       |
| ORDER_ID           | varchar(45)  | AMAZON  / EBAY 平台的订单 ID                                 | order       |
| SALES_PRICE        | decimal(8,2) | 商品单价                                                     | order       |
| QTY                | int(11)      | 商品数量                                                     | order       |
| SKU_NO             | varchar(45)  | 商品SKU编号                                                  | order       |
| receive_name       | varchar(46)  | 收件人姓名                                                   | order       |
| receive_address    | varchar(47)  | 收件人地址                                                   | order       |
| receive_phone      | varchar(48)  | 收件人电话号                                                 | order       |
| tracking_number    | varchar(49)  | 物流单号                                                     | order       |
| sts_cd             | char(1)      | 订单状态     0-已取消     1-待支付     2-待发货     3-已发货     4-已完成 | order       |
| ORDER_CREATED_TIME | varchar(45)  | 订单创建时间                                                 | order       |
| PAID_TIME          | varchar(45)  | 支付时间                                                     | order       |
| ship_time          | varchar(46)  | 发货时间                                                     | order       |
| completed_time     | varchar(47)  | 订单完成时间                                                 | order       |
| cancelled_time     | varchar(48)  | 取消订单时间                                                 | order       |
| title              | string       | 商品标题                                                     | pro_product |

##### 备注 













1、订单在数据库里的存储   √

2、管理员看到全部的订单和商品单独写接口还是改现在的  √

3、表格和详细信息是否调用一个接口  √

3、借卖商借卖需要做到后端嘛

